# ==========================================
# SwordFish Backend 环境配置模板
# ==========================================
# 使用说明：
# 1. 复制此文件并重命名为 .env
# 2. 根据实际环境修改配置值
# 3. 不要将 .env 文件提交到 Git 仓库
# ==========================================

# ==========================================
# 应用配置
# ==========================================
# 运行环境：development | production | test
NODE_ENV=development

# 服务端口
PORT=3000

# Socket.IO 端口（实时消息服务）
SOCKET_PORT=3001

# ==========================================
# 数据库配置 (MySQL)
# ==========================================
DB_HOST=localhost
DB_PORT=3306
DB_NAME=campus_secondhand
DB_USER=root
# 重要：生产环境请使用强密码！
DB_PASSWORD=your_strong_password_here

# 数据库连接池配置
DB_POOL_MAX=10
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ==========================================
# Redis 配置
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
# Redis 密码（如果设置了的话）
REDIS_PASSWORD=

# Redis 数据库索引
REDIS_DB=0

# ==========================================
# JWT 配置
# ==========================================
# JWT 密钥（必须设置！生产环境请使用复杂的随机字符串）
# 生成建议：openssl rand -base64 64
JWT_SECRET=your_jwt_secret_key_please_change_me_in_production

# Token 有效期
JWT_EXPIRES_IN=24h

# 刷新 Token 有效期
JWT_REFRESH_EXPIRES_IN=7d

# ==========================================
# 安全配置
# ==========================================
# CORS 允许的来源（多个用逗号分隔）
# 示例：http://localhost:3000,https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000

# 加密盐轮数（bcrypt）
BCRYPT_ROUNDS=10

# ==========================================
# 文件上传配置
# ==========================================
# 上传文件存储路径
UPLOAD_PATH=./uploads

# 单个文件最大大小（字节）10MB
MAX_FILE_SIZE=10485760

# 允许的图片类型（逗号分隔）
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp

# ==========================================
# 邮件服务配置（用于邮箱验证）
# ==========================================
# SMTP 服务器
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false

# 发件人邮箱
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your_email_password

# 发件人名称
SMTP_FROM_NAME=SwordFish 校园二手交易平台

# ==========================================
# 支付配置（支付宝）
# ==========================================
# 应用 ID
ALIPAY_APP_ID=your_alipay_app_id

# 支付宝网关
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do

# 商户私钥路径
ALIPAY_PRIVATE_KEY_PATH=./keys/alipay_private_key.pem

# 支付宝公钥路径
ALIPAY_PUBLIC_KEY_PATH=./keys/alipay_public_key.pem

# 回调地址
ALIPAY_NOTIFY_URL=https://yourdomain.com/api/payment/alipay/notify
ALIPAY_RETURN_URL=https://yourdomain.com/payment/success

# ==========================================
# 日志配置
# ==========================================
# 日志级别：error | warn | info | debug
LOG_LEVEL=info

# 日志文件路径
LOG_DIR=./logs

# 是否启用控制台日志
LOG_CONSOLE=true

# 是否启用文件日志
LOG_FILE=true

# ==========================================
# 限流配置
# ==========================================
# 时间窗口（毫秒）
RATE_LIMIT_WINDOW_MS=900000

# 最大请求数
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# 其他配置
# ==========================================
# API 文档是否启用（生产环境建议关闭）
ENABLE_API_DOCS=true

# 数据库同步模式：false | true
# 警告：true 会在启动时同步数据库结构，可能导致数据丢失
DB_SYNC=false

# 是否启用请求日志
ENABLE_REQUEST_LOGGING=true

# 慢请求阈值（毫秒）
SLOW_REQUEST_THRESHOLD=1000

# ==========================================
# 开发环境专用配置
# ==========================================
# 是否启用详细错误信息（仅开发环境）
VERBOSE_ERRORS=true

# 是否启用 SQL 日志（仅开发环境）
LOG_SQL=false
